define(function(){angular.module("coreModule",[]);var e=angular.module("coreModule",["base64","ngRoute","satellizer","pascalprecht.translate","toastr"]);e.config(["$locationProvider","$routeProvider","$authProvider","$controllerProvider","$translateProvider","toastrConfig",function(r,o,t,n,a,l){var s="Nest.it";t.logoutRedirect="/login",e.registerController=n.register,a.useSanitizeValueStrategy("escaped"),a.useLoader("$translatePartialLoader",{urlTemplate:"/assets/json/lang/{part}/{lang}.json"}),a.registerAvailableLanguageKeys(["en","es"],{en_US:"en",en_UK:"en",de_ES:"es"}).determinePreferredLanguage(),angular.extend(l,{positionClass:"toast-top-left"}),r.html5Mode({enabled:!0,requireBase:!1}),o.when("/",{controller:"homeController",templateUrl:"app/modules/core/views/home.html",resolve:{load:["$q",function(e){var r=e.defer();return require(["homeController"],function(){r.resolve()}),r.promise}]},title:s}).when("/search",{controller:"searchController",templateUrl:"app/modules/core/views/search.html",resolve:{load:["$q",function(e){var r=e.defer();return require(["searchController"],function(){r.resolve()}),r.promise}]},title:s}).when("/login",{controller:"loginController",templateUrl:"app/modules/core/views/login.html",resolve:{load:["$q","$location","$auth",function(e,r,o){var t=e.defer();return o.isAuthenticated()?r.path("/"):require(["loginController"],function(){t.resolve()}),t.promise}]},title:s+" - Login"})}]),e.run(["$location","$rootScope","$http","$window","$routeParams",function(e,r,o,t,n){var a=e.search().q,l=e.url().split("/");a&&"search"==l[1]&&e.path("/").search({q:a,reload:"1"}),r.$on("$routeChangeSuccess",function(o,a,l){if(a.hasOwnProperty("$$route")){r.title=a.$$route.title;var s=e.path()+"?";angular.forEach(n,function(e,r){s+=r+"="+e+"&"}),s=s.substr(0,s.length-1),t.ga("send","pageview",{page:s})}})}]),e.service("getCSRF",["$http",function(e){return function(){var r=e.get("/csrfToken").success(function(r){return e.defaults.headers.common["x-csrf-token"]=r._csrf,r._csrf});return r}}]),require(["app"],function(){angular.bootstrap(document,["coreModule"])})});