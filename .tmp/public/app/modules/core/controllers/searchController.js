define(function(){angular.module("coreModule").registerController("searchController",["$scope","$rootScope","$translate","$translatePartialLoader","$location","BPConfig","youtubeSearch","soundcloudSearch",function(e,t,o,r,s,n,u,l){r.addPart("search"),o.refresh();var a=s.search().q;a||s.path("/").search({}),o("views").then(function(o){function r(){function o(e,t){function o(e){var t=Math.floor(Math.random()*e.length),o=e[t];return e.splice(t,1),o}for(var r=[];e.length||t.length;)e.length&&(r[r.length]=o(e)),t.length&&(r[r.length]=o(t));return r}if(e.YTresultsVideos&&e.SCresultsAudios){var r=o(e.SCresultsAudios,e.YTresultsVideos);t.mergedItems=r,t.prevMergedItems=[]}}e.views=o,e.loadYoutubeSearch=function(){u(n.apiUrl,a).then(function(t){e.youtubeResultsItems=t.results.items,e.YTresultsVideos=t.items,r()})},e.loadSoundcloudSearch=function(){l(n.apiUrl,a).then(function(t){e.soundcloudResultsItems=t.results,e.SCresultsAudios=t.items,r()})},e.loadYoutubeSearch(),e.loadSoundcloudSearch()})}])});